$def with (pins,presentuser,attentions,attentions_len,followds,followds_len)
<style>
    #down_menu_1 li {

        float: left;
        padding-left: 30px

    }

    body {

        margin: 0 auto;

        width: 1250px;

    }

    .pin {
        margin-bottom: 20px;
        border: 1px solid;
        border-color: #cccccc;
        padding: 10px;
        text-align: center;
    }

    #scrollpaginationdemo .one {

        float: left;
        margin-left: -39px;

    }

    .span3 {
        list-style: none;

    }

    #scrollpaginationdemo .one li {
        list-style: none;
        margin-top: 30px

    }

</style>
<link rel="stylesheet" href="/static/css/jquery.fileupload-ui.css">
<script src="/static/js/jquery.ui.widget.js"></script>
<script src="/static/js/jquery.iframe-transport.js"></script>
<script src="/static/js/jquery.fileupload.js"></script>
<div id="modify_message" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>

        <div class="wrap">
            <form class="main form-horizontal" onsubmit="return check()" action="#" method="post"
                  onsubmit="return check();">

                <fieldset>
                    <legend>用户修改</legend>

                    <div class="control-group">
                        <label class="control-label">用户名</label>

                        <div class="controls">
                            <input name="register_username" type="text" id="modify_name" onblur="checkname(this)"
                                   class="input-xlarge">
                        </div>
                    </div>


                    <div class="control-group">
                        <label class="control-label">密码</label>

                        <div class="controls">
                            <input id="pwd" name="register_pwd" type="password" class="input-xlarge"
                                   onchange="checkPasswords()">
                            <span><font color="red">(>=6位)</font></span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label">确认密码</label>

                        <div class="controls">
                            <input style="margin-left:0px" id="pwd1" name="pwd1" type="password" class="input-xlarge"
                                   onchange="checkPasswords()">
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label"></label>
                        <div class="controls">
                            <button class="btn" type="button" id="modify_own_message" onclick="modify()">修改</button>
                            <button class="btn" type="reset">重置</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>


<div style="margin-left:45px">
    <div class="navbar">
        <table style="border:1px solid gray">
            <tr>
                <td align="center" style="padding-left:20px">
                    <div class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <button class="btn"><i style="height:20px" class="icon-align-justify"></i></button>
                        </a>
                        <ul id="down_menu_1" class="dropdown-menu" role="menu" aria-labelledby="dLabel"
                            style="width:520px">
                            <li><a tabindex="-1" href="#">最新动态</a></li>
                            <li><a tabindex="-1" href="/controlskip/1">校外教育</a></li>
                            <li><a tabindex="-1" href="/controlskip/8">家政辅导</a></li>
                            <li><a tabindex="-1" href="/controlskip/10">职业生涯</a></li>
                            <li><a tabindex="-1" href="#">我的云盘</a></li>
                            <li><a tabindex="-1" href="/controlskip/7">娱乐人生</a></li>
                            <li><a tabindex="-1" href="/controlskip/9">购物天堂</a></li>
                            <li><a tabindex="-1" href="/controlskip/2">远程办公</a></li>
                            <li><a tabindex="-1" href="#">移动应用</a></li>
                            <li><a tabindex="-1" href="/controlskip/10">职业生涯</a></li>
                            <li><a tabindex="-1" href="/controlskip/3">智慧之门</a></li>
                            <li><a tabindex="-1" href="/controlskip/11">社区服务</a></li>
                            <li><a tabindex="-1" href="#">下载专区</a></li>
                            <li><a tabindex="-1" href="/controlskip/12">公共信息</a></li>
                            <li><a tabindex="-1" href="/controlskip/4">美容美体</a></li>
                            <li><a tabindex="-1" href="/controlskip/5">情感天地</a></li>
                        </ul>
                    </div>
                </td>
                <td align="center" style="padding-left:10px;padding-top:20px">
                    <input class="span2" style="width:200px" type="text" placeholder="搜索"></td>
                <td>
                    <button style="width: 56px; margin-left: 10px; margin-top: 9px;" class="btn">搜索</button>
                </td>
                <td style="width:820px"></td>
                <td>
                    <a href="#modify_message" role="button" class="btn btn-info" data-toggle="modal" style="width:90px">修改个人资料</a>

                </td>
                <td>
                    <a href="/skipmainpage">
                        <button style="width: 90px; margin-left: 10px; margin-top: 5px;" class="btn">返回主页</button>
                    </a>
                </td>
                <td align="center" style="padding-right:20px">
                    <div class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <button class="btn btn-info"><i style="height:20px" class="icon-plus"></i></button>
                        </a>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                            <li>
                                <a href="#myModal" data-toggle="modal" data-target="#myModal">上传素材</a>
                            </li>
                        </ul>

                        <div id="myModal" class="modal hide fade">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-hidden="true">&times;</button>
                                <h3>新建素材</h3>
                            </div>
                            <form id="upload_pin" action="" enctype="multipart/form-data" method="POST">
                                <div class="modal-body">
                                    <div style="padding-bottom: 10px;">
                                        <input type="file" class="input" id="upload_pic" name="upload_pic"/>
                                    </div>
                                    <div style="padding-bottom: 10px;" id="id_file_name">
                                    </div>
                                    <!-- 进度条 -->
                                    <div id="progress_pic" class="progress progress-striped active">
                                        <div class="bar"></div>
                                    </div>
                                    <textarea rows="0" style="width: 420px" name="introduction"></textarea>
                                    <select name="board_id" id="pin_board_id">
                                        <option>校外教育</option>
                                        <option>远程办公</option>
                                        <option>智慧之门</option>
                                        <option>美容美体</option>
                                        <option>情感天地</option>
                                        <option>健康管理</option>
                                        <option>娱乐人生</option>
                                        <option>家政辅导</option>
                                        <option>购物天堂</option>
                                        <option>职业生涯</option>
                                        <option>社区服务</option>
                                        <option>公共信息</option>
                                    </select>
                                </div>
                                <div class="modal-footer">
                                    <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">关闭</a>
                                    <button id="submitdata" type="button" class="btn btn-primary">创建</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<div class="bs-docs-example">
    <ul id="myTab" class="nav nav-tabs">
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">我的发布 <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="#dropdown1" data-toggle="tab">图片</a></li>
                <li><a href="#dropdown2" data-toggle="tab">文字</a></li>
                <li><a href="#dropdown3" data-toggle="tab">资源</a></li>
            </ul>
        </li>
        <li class="active"><a href="#home" data-toggle="tab">我的消息</a></li>
        <li><a href="#profile1" data-toggle="tab">关注的人</a></li>
        <li><a href="#profile2" data-toggle="tab">粉丝</a></li>
        <li><a href="#profile3" data-toggle="tab">更多</a></li>
    </ul>
    <div id="myTabContent" class="tab-content">
        <div class="tab-pane fade in active" id="home">

        </div>
        <div class="tab-pane fade" id="profile1">
            <h4>关注列表:</h4>
            <div class="span3">
                $for i in range(attentions_len):
                $:attentions[i]
            </div>
        </div>
        <div class="tab-pane fade" id="profile2">
            <h4>粉丝列表:</h4>
            <div class="span3">
                $for i in range(followds_len):
                $:followds[i]
            </div>
        </div>
        <div class="tab-pane fade" id="profile3">
            <p>Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid</p>
        </div>
        <div class="tab-pane fade" id="dropdown1">
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span3" id="col1">
                        $for pin in pins[0]:
                        $:pin
                    </div>
                    <div class="span3" id="col2">
                        $for pin in pins[1]:
                        $:pin
                    </div>
                    <div class="span3" id="col3">
                        $for pin in pins[2]:
                        $:pin
                    </div>
                    <div class="span3" id="col4">
                        $for pin in pins[3]:
                        $:pin
                    </div>
                </div>
            </div>

        </div>
        <div class="tab-pane fade" id="dropdown2">
            <p>演示2 </p>
        </div>
        <div class="tab-pane fade" id="dropdown3">
            <p>演示3</p>
        </div>
    </div>
</div>

<script type="text/javascript">
    $$(function () {
        //文件上传地址
        var url = '/pin/upload ';
        //初始化，主要是设置上传参数，以及事件处理方法(回调函数)
        $$('#upload_pic').fileupload({
            autoUpload: false,//是否自动上传
            url: url,//上传地址
            dataType: 'json',
            done: function (e, data) {//设置文件上传完毕事件的回调函数
                var board_index = $$("#pin_board_id").get(0).selectedIndex + 1;
                alert("上传成功！");
                window.location.href = "/controlskip/" + board_index + "";
            },
            fail: function (e, data) {
                if (data.jqXHR.status == 406) {
                    alert("仅支持上传MP4和FLV文件！");
                } else {
                    var board_index = $$("#pin_board_id").get(0).selectedIndex + 1;
                    alert("上传成功！");
                    window.location.href = "/controlskip/" + board_index + "";
                }
            },
            add: function (e, data) {
                $$("#id_file_name").html(data.files[0].name);
                $$("#submitdata").click(function () {
                    var intro = $$("#introduction_pic");
                    var board = $$("#pin_board_id");
                    data.formData = {introduction: intro.val(), board_id: board.val()};
                    data.submit();//上传文件
                });
            },
            progressall: function (e, data) {//设置上传进度事件的回调函数
                var progress = parseInt(data.loaded / data.total * 100, 10);
                $$('#progress_pic .bar').css(
                        'width',
                        progress + '%'
                );
            }
        });
    });
    function modify() {
        var modify_name = $$("#modify_name").val();
        var modify_pass = $$("#pwd").val();
        alert(modify_email);
        $$.post("/modify/message",
                {
                    name: modify_name,
                    password: modify_pass
                }, function (data, textStatus) {
                    alert(data);
                }
        );
    }

    $$(function () {

        var page = 1;


        function columnAccumulator() {
            var col1_h = 0, col2_h = 0, col3_h = 0, col4_h = 0;
            col1_h = parseInt($$("#col1").height());
            col2_h = parseInt($$("#col2").height());
            col3_h = parseInt($$("#col3").height());
            col4_h = parseInt($$("#col4").height());
            return [col1_h, col2_h, col3_h, col4_h];
        }

        // return index
        function findMin(array) {
            var minID = 0;
            var minVal = array[0];
            for (var i = 1; i < array.length; i++) {
                if (array[i] < minVal) {
                    minID = i;
                    minVal = array[i];
                }
            }
            return minID;
        }
    });
</script>

